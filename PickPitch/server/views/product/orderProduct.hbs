<div class="page-wrapper">
  <div class="container-fluid">
    <!-- /.row -->
    <div class="row">
      <div class="white-box">
        <div class="table-responsive">
          <table class="table product-overview" id="myTable">
            <thead>
              <tr>
                <th>Customer</th>
                <th>Order ID</th>
                <th>Photo</th>
                <th>Product</th>
                <th>Quantity</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {{#each tickets}}
              <tr>
                <td>{{user_id}}</td>
                <td>{{_id}}</td>
                <td> <img src="https://e7.pngegg.com/pngimages/606/459/png-clipart-ticket-illustration-cartoon-movie-tickets-cartoon-character-text.png" alt="iMac" width="80"> </td>
                <td>Vé đặt sân</td>
                <td>{{size}}</td>
                <td>{{create_at}}</td>
                <td> <span class="label label-success font-weight-100">{{not_paid}}</span> </td>
                <td><a class="text-inverse p-r-10" id="deleteTicket" data-toggle="tooltip" title="Edit" ><i class="ti-marker-alt"></i></a> <a href="/product/delete-product/{{_id}}" class="text-inverse" title="Delete" data-toggle="tooltip" onclick="return confirm('Bạn có muốn xóa không')"><i class="ti-trash"></i></a></td>
              </tr>
              
              {{/each}}
              
            </tbody>
            
          </table>
        </div>
      </div>
    </div>
    <!--row -->
    <!-- ===== Right-Sidebar ===== -->
    <!-- ===== Right-Sidebar-End ===== -->
  </div>
  <div class="row text-center">
    <div class="col"></div>
    <nav
      aria-label="Page navigation example "
    >
      <ul class="pagination" style="width: fit-content;">
        {{#ifCond previous ">" 0}}
          <li class="page-item"><a
              class="page-link previous"
              href=""
              onclick="previousPage({{currentPage}})"
            >Previous</a></li>
        {{/ifCond}}
        {{#ifCond previous ">" 0}}
          <li class="page-item"><a
              class="page-link"
              href="{{previousLink}}"
            >{{previous}}</a></li>
        {{/ifCond}}
        {{#ifCond currentPage ">" 0}}
          <li class="page-item"><a
              class="page-link"
              href="{{currentLink}}"
            >{{currentPage}}</a></li>
        {{/ifCond}}
        {{#ifCond next ">" 0}}
          <li class="page-item"><a
              class="page-link"
              href="{{nextLink}}"
            >{{next}}</a></li>
        {{/ifCond}}
        {{#ifCond next ">" 0}}
          <li class="page-item"><a
              class="page-link next"
              href=""
              onclick="nextPage({{currentPage}})"
            >Next</a></li>
        {{/ifCond}}
      </ul>
    </nav>
  </div>
</div>
<script>
    function previousPage(page){

    const previous = parseInt(page) - 1;
    $(".previous").attr("href", "/product/"+"show-product" +"?page=" + previous);
  }

  function nextPage(page){
    console.log(page);
    const next = parseInt(page) + 1;
    $(".next").attr("href", "/product/"+"show-product"+"?page="+ next);
  }

  function DeleteTicket(event){
    const parent = $(event.target).parents()[2];
    const ticket_id = $(parent).children()[1].innerHTML;

    $.ajax({
      url:"/product/delete-product",
      method:"POST",
      data:{
        data:ticket_id
      }
    }).then(data=>{
      $(document).ready(()=>{
        location.reload();
      })
    })
    
  }
</script>
{{!-- 
{{#each tickets}}
  {{#list this}}
    
  {{/list}}
{{/each}} --}}
